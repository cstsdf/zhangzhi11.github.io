---
title: 阿里音乐流行预测比赛赛后总结
layout: post
tags:
  - 音乐预测
category: 比赛
---
阿里音乐流行预测是我第一次做数据挖掘相关的比赛，最后的成绩也不是很理想，这次乘着看了大牛们的答辩和思路分享，简单的把在这次比赛中的思路还有一些反思总结一下。也是一个再次学习的过程。
### 竞赛题目
本次大赛以阿里音乐用户的历史播放数据为基础，期望参赛者可以通过对阿里音乐平台上每个阶段艺人的试听量的预测，挖掘出即将成为潮流的艺人，从而实现对一个时间段内音乐流行趋势的准确把控。
### 竞赛数据
本次比赛的数据分为两张表：用户行为表，歌曲艺人表，包含相关艺人6个月内的用户行为数据。
![用户行为表](pic/1.png)<br>
![歌曲艺人表](pic/2.png)<br>

最后需要提交的一张表是对后面两个月每个艺人播放量的预测情况。
![预测表](pic/3.png)<br>
### 评估指标
![评估指标](pic/4.png)<br>
### 赛题分析
首先是对数据的分析，因为要预测艺人的未来播放量，所以最直观的方法就是利用艺人历史播放量来进行回归预测也就成了顺理成章的事情。给出的两张表一张是用户的行为，一张是歌曲艺人的属性。其实对艺人播放量有直接关系的表项有user_id, song_id, action_type, Ds, artist_id. 其他的表项其实只是为了刻画歌曲属性，可以用作后来的歌曲或者艺人画像。

第二个是对评价标准的分析，这个也是我们在做比赛时忽视的一个方面。在最近看了http://www.wangqingbaidu.cn/article/alimusic1471161131.html 的文章，发现从评估标准出发就会得到一个非常不错的成绩。评价标准会偏向预测较小的结果，具体可以得到一个平均的预测值使评价指标最小。
![公式1](pic/5.png)<br>

算出x是评价指标对x的梯度为零，得到利用均值的评价指标最小值。
### 解决思路
这道题目可以看做是一个预测问题，那么初始的思路就有两种：1、时间序列预测的相关方法，如arima模型，时间序列分解的方法等；2、回归的方法，利用历史的歌手播放量回归一个函数，去预测未来两个月的歌手播放量。第一种方法由于模型参数较多，我们并不是很熟悉这种方法，同时第二赛季平台赛也不支持，所以基本在简单的调研之后就放弃了。

对于回归的方法。为了选择所要拟合的函数，首先观察歌手的历史数据：
![数据1](pic/singer1_history.jpg)<br>
![数据2](pic/singer2_history.jpg)<br>
![数据3](pic/singer3_history.jpg)<br>

规律性最强的其实就是新歌的衰减趋势，对于一首歌，从发布开始然后播放量开始逐渐下降然后趋于一个稳定的值。所以如何刻画这种趋势变成了重点。我在比赛时主要尝试了三种回归方法：
1、受限线性回归模型
这种回归方法主要是基于线性回归模型，但由于一首歌的播放量不可能无限增加，也不可能减小到0以下，所以在线性回归的基础上，我们增加了上限和下限。因为对于预测来说6个月的太过久远，所以我们只取后四个月的艺人播放量进行预测。上限采用历史数据的最高值，下限采用历史数据的最低值。这种方法较为简单，效果也不是很理想，但是比均值要有一些提高。
2、sigmoid回归模型
因为想到预测时有上限和下限，所以想利用sigmoid函数去拟合历史数据，但是这种方法非常容易受到离群点的影响。效果比受限线性回归模型要好一些。
3、对数函数回归模型
因为考虑到新歌会随着时间的推移，播放量会慢慢降低。所以想用负对数函数去拟合这样的趋势，同时负对数函数还有一个好处是自带下限。下限设置为历史最低播放量。公式为：
![公式2](pic/6.png)<br>

这个方法在第一赛季的时候也可以达到6400多分。

还有就是对于不同歌手和歌曲的分类，然后在进行拟合，或者说不同的歌曲用不一样的模型和参数。这个我们也只是做了简单的尝试。效果一直没有提高，感觉不应该是主要问题。
### 赛后总结
这段时间也看了前几名所分享的解决思路，自己也学习到一些知识，在这里做个总结：
1、数据清理很重要！！！对于天池比赛，由于都是工业界直接获得的数据，所以数据有很多缺失值和离群点，数据清洗往往比你试了非常多的高端模型更加效果明显。
2、每个方法做细致一点是提高成绩的关键，这个比赛本来就是用规则去提高成绩比较好，规则是建立在不断的观察数据和尝试的基础上，感觉我们这一点并没有做到位。
3、读题要仔细，其实在Ferryman中分享的文章中，一个很简单的idea就会大大的提高结果。这也是建立在仔细读题和对数据的理解上的。
下次科研不忙的时候一定要再接再厉，再参加一次天池比赛！且学且珍惜。。。



